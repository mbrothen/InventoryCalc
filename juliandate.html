<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css" />
    <script src="modernizr.custom.js"></script>
    <!--Javascript file here-->
    <title>Inventory Pro</title>
</head>

<body>
<div class="wrapper">
    <div id="header">
        <h1>Inventory Calc</h1>
    </div>
    <div id="menu">
        <ul class = "navigation">
            <li><a href = "index.html">Home</a></li>
            <li><a href = "dayday.html">Days Between Days</a></li>
            <li><a href = "dayafter.html">Days After Date</a></li>
            <li><a href = "juliandate.html">Julian Date Converter</a></li>
            <li><a href = "pastaccept.html">Past Accept Calculator</a></li>
            <li><a href = "security.html">Security Info</a></li>
        </ul>
    </div>
    <div id="content">
        <div id="dayday" class="card">
            <h2>Julian Date Converter</h2>
            <form>
                <label for="jDate">Julian date: </label><input type="number" id="jDate">
                <br>
                <p>Result</p>
                <p id="result" style="font-weight: bolder; font-size: 3em;">&nbsp;</p>
            </form>
        </div>


    </div>
    <div id="footer">
        <p>Page for educational use only</p>
        <p>Copyright 2018</p>
        <p><a href="feedback.html">Feedback Welcome</a></p>

    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>


    //PROGRAM WITH JQUERY AND EXCEPTION HANDLING
    function julainDate() {
        var date = $("#jDate").val();
        //var date = document.getElementById("jDate").value;
        var result;
        console.log(date);
        switch(date.length) {
            case 3:
                if (date > 366) { ///check for date code over 1 year (leap year
                    //document.getElementById('result').innerHTML = "Invalid date";
                    $('#result').html("Invalid date");
                    $('#result').css("color", "red");

                } else {
                    date = date * 86400000;
                    console.log("Julian in MS " + date);
                    var d = new Date();
                    var n = d.getFullYear();
                    var startString = "01-01-" + n;
                    var start = new Date(startString);
                    start = start.getTime();
                    result = (start + date) - 86400000;
                    var print = new Date(result);
                    console.log(start + " start");
                    //document.getElementById('result').innerHTML = print.toLocaleDateString();
                    $('#result').html(print.toLocaleDateString());
                    $('#result').css("color", "black");

                }
                break;
            default:
                //exceptions for the form.  Requires 3 digit julian date or flags error
                //document.getElementById('result').innerHTML = "Enter 3 Digits";
                $('#result').html("Enter 3 Digits");
                $('#result').css("color", "red");
                break;

        }
    }
    $("#jDate").on("input", julainDate); //create event listener
    /*
    if (document.addEventListener){
        document.getElementById("jDate").addEventListener("input", julianDate);

    } else if (document.attachEvent) {
        document.getElementById("jDate").attachEvent("input", julianDate);
    }*/
</script>
</body>

</html>